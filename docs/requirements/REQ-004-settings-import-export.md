# REQ-004: 设置导入/导出

> 状态: 已确认 | 创建: 2026-02-08 | PM: Qiqi

## 1. 需求描述

### 背景
用户更换设备或重装应用时，需要重新配置所有设置。需要提供一键导入导出功能。

### 用户故事
- 作为用户，我想把设置导出为文件，方便备份
- 作为用户，我想在新设备上一键导入之前的设置

## 2. 功能设计

### 导出
- Settings → General 底部添加 [导出设置] 按钮
- 导出为 JSON 文件（`onething-settings-2026-02-08.json`）
- 包含：AI 配置、工具设置、快捷键、主题、Agent 配置
- **不包含**：API Key（安全考虑）、会话历史

### 导入
- Settings → General 添加 [导入设置] 按钮
- 选择 JSON 文件后预览变更
- 确认后覆盖当前设置
- 导入后自动重载

### 安全
- API Key 不导出，导入时提示用户重新填写
- 导入前验证 JSON 格式
- 支持部分导入（只导入选中的配置项，可选后续迭代）

## 3. 技术设计

### 影响模块
| 模块 | 改动 |
|------|------|
| GeneralSettingsTab.vue | 添加导入/导出按钮 |
| 新建 settings-io.ts (主进程) | 导入导出逻辑 |
| IPC | 新增 SETTINGS_EXPORT / SETTINGS_IMPORT |
| preload | 暴露 API |

### 导出数据结构
```json
{
  "version": "0.1.0",
  "exportedAt": "2026-02-08T00:00:00Z",
  "settings": {
    "ai": { ... },
    "tools": { ... },
    "shortcuts": { ... },
    "theme": { ... }
  }
}
```

## 4. 验收标准
- [ ] 导出生成 JSON 文件
- [ ] 不包含 API Key
- [ ] 导入后设置正确恢复
- [ ] 无效文件给出错误提示

## 5. 预估
~1.5 小时

---
*PM: Qiqi | 日期: 2026-02-08*
